{% extends "base.html" %}
{% block title %}Journal{% endblock %}

{% block content %}
<h2>ğŸ“’ Journal | Ø¯ÙØªØ± Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h2>

<form method="post" action="/journal/create">
    <input type="number" name="entry_no" placeholder="Entry No" required>
    <input type="date" name="date" required>
    <input type="text" name="description" placeholder="Description" required>

    <select name="currency_id" required>
        {% for c in currencies %}
        <option value="{{ c.id }}">{{ c.code }}</option>
        {% endfor %}
    </select>

    <hr>

    {% for i in range(2) %}
    <h4>Line {{ i + 1 }}</h4>
    <select name="account_id">
        {% for a in accounts %}
        <option value="{{ a.id }}">{{ a.code }} - {{ a.name }}</option>
        {% endfor %}
    </select>
    <input type="number" step="0.01" name="debit" placeholder="Debit">
    <input type="number" step="0.01" name="credit" placeholder="Credit">
    <select name="person_id">
        <option value="">Person</option>
        {% for p in persons %}
        <option value="{{ p.id }}">{{ p.name }}</option>
        {% endfor %}
    </select>
    <hr>
    {% endfor %}

    <button type="submit">ğŸ’¾ Save</button>
</form>

<h3>Saved Entries</h3>
<ul>
{% for e in entries %}
<li>
Entry {{ e.entry_no }} - {{ e.description }}
{% if e.posted %} âœ… Posted {% else %}
<form method="post" action="/journal/post/{{ e.id }}" style="display:inline;">
<button>Post</button>
</form>
{% endif %}
</li>
{% endfor %}
</ul>
{% endblock %}
