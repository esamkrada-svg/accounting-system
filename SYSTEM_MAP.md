# ๐งญ SYSTEM MAP โ Accounting System (FastAPI)

ูุฐุง ุงููุณุชูุฏ ูุดุฑุญ ุฎุฑูุทุฉ ุงููุธุงู ุงููุญุงุณุจูุ ูุญุฏูุฏ ูู ููุฏูููุ ูููู ุชุชุฏูู ุงูุจูุงูุงุช.
ุงููุณุงุนุฏ ุงูุฐูู ููุฒู ุจุงุณุชุฎุฏุงู ูุฐุง ุงูููู ูููู ุงูุณูุงู ูุจู ุงูุชุฑุงุญ ุฃู ุชุนุฏูู.

---

## 1๏ธโฃ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู

- ุงููุธุงู: **ูุธุงู ูุญุงุณุจู ูุจูู ุจู FastAPI + SQLAlchemy**
- ุงููุฏู: ุชุณุฌูู ูููุฏ ูุญุงุณุจูุฉุ ุชุฑุญูููุงุ ูุฅุตุฏุงุฑ ุชูุงุฑูุฑ (ููุฒุงู ูุฑุงุฌุนุฉุ ุชูุงุฑูุฑ ูุงููุฉ)
- ูุงุนุฏุฉ ุงูุจูุงูุงุช: PostgreSQL (ุนุจุฑ `DATABASE_URL`)
- ุงููุธุงู **stateful** (ุฃู ุฃู ุงูุจูุงูุงุช ุงููุญุงุณุจูุฉ ุฏุงุฆูุฉ ููุง ุชูุนุงุฏ ุชูููุฏูุง)

---

## 2๏ธโฃ ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ (CRITICAL)

โ **ุฃู ุชุนุฏูู ุจุฑูุฌู ูุฌุจ ุฃู ูุญุงูุธ ุนูู:**
- ุนุฏู ุญุฐู ุฃู ุฅุนุงุฏุฉ ุฅูุดุงุก ุฌุฏุงูู ูุญุงุณุจูุฉ
- ุนุฏู ุงููุณุงุณ ุจุงููููุฏ ุงููุฑุญููุฉ
- ุนุฏู ุชูููุฏ ุจูุงูุงุช ุชููุงุฆูุฉ ุจุนุฏ ุงูุชุดุบูู ุงูุฃูู
- ุนุฏู ูุณุฑ ุชุชุงุจุน ุงููููุฏ (Journal Entries)

---

## 3๏ธโฃ ุงูููุฏูููุงุช ุงูุฃุณุงุณูุฉ (Web)

### ๐น Accounts
- ุงููุณุงุฑ: `app/modules/accounts`
- ุงููุธููุฉ: ุฅุฏุงุฑุฉ ุฏููู ุงูุญุณุงุจุงุช
- ููุงุญุธุงุช:
  - ุงูุญุณุงุจุงุช ุชูุฒุฑุน ูุฑุฉ ูุงุญุฏุฉ ููุท (Seed)
  - ูุง ุชูุญุฐู ุจุนุฏ ุจุฏุก ุงููููุฏ

---

### ๐น Journal (ุงูููููุฉ)
- ุงููุณุงุฑ: `app/modules/journal`
- ุงูุฌุฏุงูู:
  - `journal_entries`
  - `journal_lines`
- ุงูููุงุนุฏ:
  - ุงูููุฏ ูุง ูุคุซุฑ ูุญุงุณุจููุง ุฅูุง ุฅุฐุง `posted = True`
  - `entry_no` ููููุญ ููุท ุนูุฏ ุงูุชุฑุญูู
  - ุงูููุฏ ุบูุฑ ุงููุชูุงุฒู ููุฑูุถ

---

### ๐น Opening Entry (ุชู ุชุนุทููู ููุทูููุง)
- ุงูููุฏ ุงูุงูุชุชุงุญู **ูู ูุนุฏ ุดุฑุทูุง ููุชุดุบูู**
- ุฃู ููุฏ ูุฑุญูู ูููู ุฃู ูููู ุฃูู ููุฏ
- ุงููุธุงู ูุง ูุนุชูุฏ ุญุงูููุง ุนูู Opening Balance ูููุทู ุฅูุฒุงูู

---

### ๐น Accounting Periods
- ุงููุณุงุฑ: `app/modules/periods`
- ุงููุธููุฉ:
  - ุชุนุฑูู ูุชุฑุงุช ูุญุงุณุจูุฉ
- ุงูููุงุญุธุฉ:
  - ูุง ููุฌุฏ ุญุงูููุง ุฑุจุท ุฅูุฒุงูู ุจูู ุงูููุฏ ูุงููุชุฑุฉ
  - ุงูุฅุบูุงู ูุง ูููุน ุงูุฅุฏุฎุงู (ูุฑุญูุฉ ูุณุชูุจููุฉ)

---

### ๐น Reports
- ุงููุณุงุฑ: `app/modules/reports`
- ุงูุชูุงุฑูุฑ ุงูุญุงููุฉ:
  - Trial Balance
- ุชุนุชูุฏ ููุท ุนูู:
  - `journal_entries.posted = True`

---

## 4๏ธโฃ API Layer

### ๐น API Auth
- Token-based (in-memory)
- ููุงุณุชุฎุฏุงู ุงูุฏุงุฎูู ูุงูุชุทููุฑ ููุท

### ๐น API Journal / Reports
- ูุฑุงุกุฉ ููุท
- ูุง ุชุนุฏูู ุงูุจูุงูุงุช

### ๐น AI Debug API
- Read-only
- ูุญูู ููุฏ + ุณูุงู
- ูุง ููููุฐ ููุง ููุชุจ

---

## 5๏ธโฃ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Models)

### JournalEntry
- ููุซู ุงูููุฏ
- ุฃูู ุงูุญููู:
  - `entry_no` (ูุฏ ูููู NULL ูุจู ุงูุชุฑุญูู)
  - `posted` (True = ูุคุซุฑ ูุญุงุณุจููุง)

### JournalLine
- ููุซู ุณุทุฑ ุงูููุฏ
- ูุฌุจ ุฃู ูุญูู:
  - ูุฌููุน ุงููุฏูู = ูุฌููุน ุงูุฏุงุฆู ููู ููุฏ

---

## 6๏ธโฃ Middleware & Security

- Middleware ูุชุญูู ูู ูุฌูุฏ Cookie `user`
- API ูุณุชุฎุฏู Token Header
- ูุง ููุฌุฏ RBAC ูุนููุฏ (ุญุงูููุง)

---

## 7๏ธโฃ ูุง ูู ุงููุณููุญ ูููุณุงุนุฏ ุงูุฐููุ

โ ูุณููุญ:
- ุดุฑุญ ุงูุฃุฎุทุงุก
- ุชุชุจุน ุชุฏูู ุงูุจูุงูุงุช
- ุงูุชุฑุงุญ ุชุนุฏูู ุตุบูุฑ ููุญุฏุฏ
- ุชุญููู ุณุจุจ bug

โ ููููุน:
- ุฅุนุงุฏุฉ ููููุฉ ูุจูุฑุฉ
- ุญุฐู ููุทู ูุญุงุณุจู
- ุงูุชุฑุงุญ ุญููู ุชุฎุงูู ุงููููุฏ ุฃุนูุงู
- ุงูุชุฑุงุญ seed ุชููุงุฆู ูููููุฏ

---

## 8๏ธโฃ ููุณูุฉ ุงูุชุทููุฑ ุงููุนุชูุฏุฉ

- **Stability > Features**
- **ูุถูุญ ุงููุญุงุณุจุฉ ุฃูู ูู ุฐูุงุก ุงูููุฏ**
- ุฃู ุฐูุงุก ุงุตุทูุงุนู = ูุณุงุนุฏ ูุทูุน ูููุณ ูุชุญูู

---

๐ ูุฐุง ุงูููู ูู ุงููุฑุฌุน ุงูุฃุนูู ูููู ุงููุธุงู.
ุฃู ุงูุชุฑุงุญ ูุง ูุชูุงูู ูุนู ููุนุชุจุฑ ูุฑููุถูุง ุชููุงุฆููุง.
